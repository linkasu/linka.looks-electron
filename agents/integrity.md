# Целостность и взаимосвязи

Главный процесс Electron (директория `src/electron`) отвечает за работу с файловой системой и интеграцию с внешними сервисами. Он общается с клиентской частью по IPC‑каналам с помощью `ipcMain.handle` и `ipcRenderer.invoke`.
Ключевой сервис — `CardsStorage`: он хранит наборы карточек, выполняет операции чтения и записи на диск и отдаёт результаты фронтенду по запросу.

### Бэкенд и обмен данными

Функциональность бэкенда сосредоточена в сервисах внутри `src/electron`:

- `card-storage-service.ts` — отвечает за манипуляции с файлами `.linka`. Сервис проверяет пути, читает конфигурацию наборов и предоставляет изображения и звук карточек по запросу фронтенда.
- `tobii` — набор классов для работы с трекером взгляда. Модули `backWatch.ts` и `pageWatch.ts` передают данные о точке взгляда в окно приложения.
- для озвучивания текста используется `TTSServer` в `src/frontend/utils`, который отправляет HTTP‑запрос на удалённый сервис `tts.linka.su`. Полученные аудиофайлы воспроизводятся фронтендом.

Фронтенд (`src/frontend`) построен на Vue 3. Навигация реализована через Vue Router, а общие данные хранятся в Vuex. Для исключения несоответствий обе части используют типы и константы из каталога `src/common`.

Сборка осуществляется единой процедурой при помощи `vue-cli-plugin-electron-builder`. Конфигурация TypeScript (`tsconfig.json`, `tsconfig.node.json`) и параметры сборки находятся в корне репозитория. Юнит‑тесты запускаются командой `yarn test:unit`, что помогает отслеживать корректность работы модулей.

Единый процесс сборки и общие конфигурации обеспечивают целостность приложения при разработке и выпуске релизов.
